{"version":3,"sources":["components/layouts/Login.jsx"],"names":["Login","_useState","useState","name","password","_useState2","Object","D_tutorials_Html_Css_My_Websites_ASP_Net_Core_books_app_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__","form","setForm","_useState3","_useState4","errorMessage","setErrorMessage","_useState5","_useState6","redirect","setRedirect","setUser","useContext","context","handleChange","e","target","D_tutorials_Html_Css_My_Websites_ASP_Net_Core_books_app_client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__","D_tutorials_Html_Css_My_Websites_ASP_Net_Core_books_app_client_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__","value","handleSubmit","_ref","D_tutorials_Html_Css_My_Websites_ASP_Net_Core_books_app_client_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_tutorials_Html_Css_My_Websites_ASP_Net_Core_books_app_client_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","response","token","wrap","_context","prev","next","preventDefault","Axios","post","Name","Password","sent","data","localStorage","setItem","isAdmin","t0","status","stop","_x","apply","this","arguments","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","className","onSubmit","style","overflowX","data-aos123","type","required","onChange","minLength","data-aos123-offset","react_router_dom__WEBPACK_IMPORTED_MODULE_8__"],"mappings":"2MAyFeA,UApFD,WAAM,IAAAC,EACMC,mBAAS,CAAEC,KAAM,GAAIC,SAAU,KADrCC,EAAAC,OAAAC,EAAA,EAAAD,CAAAL,EAAA,GACXO,EADWH,EAAA,GACLI,EADKJ,EAAA,GAAAK,EAEsBR,mBAAS,IAF/BS,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAEXE,EAFWD,EAAA,GAEGE,EAFHF,EAAA,GAAAG,EAGcZ,oBAAS,GAHvBa,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAGXE,EAHWD,EAAA,GAGDE,EAHCF,EAAA,GAIVG,EAAYC,qBAAWC,KAAvBF,QAEFG,EAAe,SAAAC,GACnB,IAAMnB,EAAOmB,EAAEC,OAAOpB,KACtBM,EAAQH,OAAAkB,EAAA,EAAAlB,CAAA,GAAKE,EAANF,OAAAmB,EAAA,EAAAnB,CAAA,GAAaH,EAAOmB,EAAEC,OAAOG,UAGhCC,EAAY,eAAAC,EAAAtB,OAAAuB,EAAA,EAAAvB,CAAAwB,EAAAC,EAAAC,KAAG,SAAAC,EAAMX,GAAN,IAAAY,EAAAC,EAAA,OAAAL,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACnBjB,EAAEkB,iBADiBH,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGME,IAAMC,KAAK,mBAAoB,CACpDC,KAAMnC,EAAKL,KACXyC,SAAUpC,EAAKJ,WALA,OAGX8B,EAHWG,EAAAQ,MAOXV,EAAQD,EAASY,KAAKX,SAE1BY,aAAaC,QAAQ,aAAcb,GACnCY,aAAaC,QAAQ,OAAQxC,EAAKL,MAClCe,EAAQ,CAAEf,KAAMK,EAAKL,KAAM8C,QAASf,EAASY,KAAKG,WAEpDhC,GAAY,GAbKoB,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAa,GAAAb,EAAA,SAeO,MAfPA,EAAAa,GAcRhB,SACIiB,QAAgBtC,EAAgB,6BAf5B,yBAAAwB,EAAAe,SAAAnB,EAAA,kBAAH,gBAAAoB,GAAA,OAAAzB,EAAA0B,MAAAC,KAAAC,YAAA,GAmBlB,OAAIxC,EAAiByC,EAAA1B,EAAA2B,cAACC,EAAA,EAAD,CAAUC,GAAG,MAGhCH,EAAA1B,EAAA2B,cAAA,QAAMG,UAAU,kBACdJ,EAAA1B,EAAA2B,cAAA,QACEG,UAAU,6CACVC,SAAUnC,EACVoC,MAAO,CAAEC,UAAW,WAEpBP,EAAA1B,EAAA2B,cAAA,MAAIG,UAAU,oCAAd,SACAJ,EAAA1B,EAAA2B,cAAA,MAAIG,UAAU,kCAAkCjD,GAChD6C,EAAA1B,EAAA2B,cAAA,OAAKG,UAAU,gCAAgCI,cAAY,cACzDR,EAAA1B,EAAA2B,cAAA,SAAOG,UAAU,cAAjB,aACAJ,EAAA1B,EAAA2B,cAAA,SACEhC,MAAOlB,EAAKL,KACZ+D,KAAK,OACLL,UAAU,eACV1D,KAAK,OACLgE,UAAQ,EACRC,SAAU/C,EACVgD,UAAU,OAGdZ,EAAA1B,EAAA2B,cAAA,OAAKG,UAAU,gCAAgCI,cAAY,cACzDR,EAAA1B,EAAA2B,cAAA,SAAOG,UAAU,cAAjB,YACAJ,EAAA1B,EAAA2B,cAAA,SACEhC,MAAOlB,EAAKJ,SACZ8D,KAAK,WACLL,UAAU,eACV1D,KAAK,WACLgE,UAAQ,EACRC,SAAU/C,EACVgD,UAAU,OAIdZ,EAAA1B,EAAA2B,cAAA,OAAKG,UAAU,6CACbJ,EAAA1B,EAAA2B,cAAA,UACEQ,KAAK,SACLL,UAAU,yBACVI,cAAY,aACZK,qBAAmB,KAJrB,UASFb,EAAA1B,EAAA2B,cAACa,EAAA,EAAD,CAAMX,GAAG,YAAYC,UAAU,2BAA/B","file":"static/js/5.a2d054bb.chunk.js","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { context } from \"../../utils/Context\";\r\n\r\nconst Login = () => {\r\n  const [form, setForm] = useState({ name: \"\", password: \"\" });\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [redirect, setRedirect] = useState(false);\r\n  const { setUser } = useContext(context);\r\n\r\n  const handleChange = e => {\r\n    const name = e.target.name;\r\n    setForm({ ...form, [name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await Axios.post(\"/api/users/login\", {\r\n        Name: form.name,\r\n        Password: form.password\r\n      });\r\n      const token = response.data.token;\r\n      if (token) {\r\n        localStorage.setItem(\"auth-token\", token);\r\n        localStorage.setItem(\"user\", form.name);\r\n        setUser({ name: form.name, isAdmin: response.data.isAdmin });\r\n      }\r\n      setRedirect(true);\r\n    } catch ({ response }) {\r\n      if (response.status === 400) setErrorMessage(\"Invalid Username/Password\");\r\n    }\r\n  };\r\n\r\n  if (redirect) return <Redirect to=\"/\" />;\r\n\r\n  return (\r\n    <main className=\"py-3 container\">\r\n      <form\r\n        className=\"row mt-5 mb-5 justify-content-center w-100\"\r\n        onSubmit={handleSubmit}\r\n        style={{ overflowX: \"hidden\" }}\r\n      >\r\n        <h1 className=\"text-primary text-center col-12 \">Login</h1>\r\n        <h6 className=\"text-danger text-center col-12\">{errorMessage}</h6>\r\n        <div className=\"form-group mb-5 col-lg-6 mx-2\" data-aos123=\"fade-right\">\r\n          <label className=\"text-white\">User Name</label>\r\n          <input\r\n            value={form.name}\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"name\"\r\n            required\r\n            onChange={handleChange}\r\n            minLength=\"5\"\r\n          />\r\n        </div>\r\n        <div className=\"form-group mb-5 col-lg-6 mx-2\" data-aos123=\"fade-right\">\r\n          <label className=\"text-white\">Password</label>\r\n          <input\r\n            value={form.password}\r\n            type=\"password\"\r\n            className=\"form-control\"\r\n            name=\"password\"\r\n            required\r\n            onChange={handleChange}\r\n            minLength=\"8\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"col-12 d-flex px-2 justify-content-center\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"btn btn-lg btn-primary\"\r\n            data-aos123=\"flip-right\"\r\n            data-aos123-offset=\"0\"\r\n          >\r\n            Login\r\n          </button>\r\n        </div>\r\n        <Link to=\"/register\" className=\"col-12 text-center my-5\">\r\n          Dont Have an account yet ?\r\n        </Link>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}